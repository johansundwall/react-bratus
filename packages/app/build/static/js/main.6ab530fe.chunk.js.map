{"version":3,"sources":["locales lazy /^/.//.*//messages/.js$/ groupOptions: {} namespace object","utils/locale.js","hooks/useLocale.js","providers/I18nWatchLocaleProvider.js","providers/ThemeProvider.js","styles/atoms/ComponentNode/index.js","styles/tokens/units.js","styles/atoms/MenuTitle/index.js","App.js","reportWebVitals.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","locale","a","messages","i18n","load","activate","LOCAL_STORAGE_KEY","useLocale","useState","localStorage","getItem","navigator","languages","language","userLanguage","split","setLocale","updateLocale","value","setItem","loadLocaleData","plurals","en","da","I18nWatchLocaleProvider","children","useLingui","propTypes","PropTypes","any","THEME","primary","secondary","ThemeProvider","theme","StyledNode","styled","div","height","ComponentNode","data","linesOfCode","inDegree","type","position","label","component","timesUsed","outDegree","baseUnit","Wrapper","StyledTitle","h2","Line","hr","navigationWidth","MenuTitle","StyledLayout","Layout","StyledMiniMap","MiniMap","Actions","App","elements","setElements","Sider","dagreGraph","dagre","graphlib","Graph","setDefaultEdgeLabel","useEffect","fetch","res","json","direction","isHorizontal","setGraph","rankdir","forEach","el","isNode","setNode","width","nodeWidth","setEdge","source","target","layout","nodeWithPosition","node","targetPosition","sourcePosition","x","Math","random","y","getLayoutedElements","concat","nodes","edges","edge","labelBgPadding","labelBgBorderRadius","labelBgStyle","fill","fillOpacity","labelStyle","style","stroke","catch","console","log","overflow","left","mode","onClick","method","ghost","connectionLineType","nodeTypes","reactComponent","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6ab530fe.chunk.js","sourcesContent":["var map = {\n\t\"./da/messages.js\": [\n\t\t398,\n\t\t3\n\t],\n\t\"./en/messages.js\": [\n\t\t399,\n\t\t4\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 7);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 391;\nmodule.exports = webpackAsyncContext;","import { i18n } from '@lingui/core';\n\nexport const getUserLocale = () => {\n  // Returns \"en-GB\"\n  const languageCode =\n    (navigator.languages && navigator.languages[0]) ||\n    navigator.language ||\n    navigator.userLanguage;\n\n  // Returns \"en\"\n  return languageCode.split('-')[0];\n};\n\nexport async function activate(locale) {\n  const { messages } = await import(`../locales/${locale}/messages.js`);\n  i18n.load(locale, messages);\n  i18n.activate(locale);\n}\n","import { useState } from 'react';\n\nimport { getUserLocale } from '../utils';\n\nconst LOCAL_STORAGE_KEY = 'escooter-reporter:settings:locale';\n\nconst useLocale = () => {\n  const [locale, setLocale] = useState(\n    localStorage.getItem(LOCAL_STORAGE_KEY) ?? getUserLocale()\n  );\n\n  const updateLocale = (value) => {\n    localStorage.setItem(LOCAL_STORAGE_KEY, value);\n    setLocale(value);\n  };\n\n  return { locale, updateLocale };\n};\n\nexport default useLocale;\n","import { i18n } from '@lingui/core';\nimport { useLingui } from '@lingui/react';\nimport { da, en } from 'make-plural/plurals';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\ni18n.loadLocaleData('en', { plurals: en });\ni18n.loadLocaleData('da', { plurals: da });\n\nconst I18nWatchLocaleProvider = ({ children }) => {\n  const { i18n } = useLingui();\n\n  // Skip render when locale isn't loaded\n  if (!i18n.locale) return null;\n\n  // Force re-render when locale changes. Otherwise translations won't be updated.\n  return <>{children}</>;\n};\n\nI18nWatchLocaleProvider.propTypes = {\n  children: PropTypes.any,\n};\n\nexport default I18nWatchLocaleProvider;\n","import React from 'react';\nimport { ThemeProvider as StyledThemeProvider } from 'styled-components';\n\nconst THEME = {\n  primary: '#3e3e3e',\n  secondary: '#000000',\n};\n\nconst ThemeProvider = ({ children }) => {\n  return <StyledThemeProvider theme={THEME}>{children}</StyledThemeProvider>;\n};\n\nexport default ThemeProvider;\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Handle } from 'react-flow-renderer';\nimport styled from 'styled-components';\nconst StyledNode = styled.div`\n  height: ${({ height }) => 20 + height}px;\n  background-color: green;\n`;\nconst ComponentNode = ({ data }) => {\n  return (\n    <StyledNode height={data.linesOfCode}>\n      {data.inDegree > 0 && <Handle type=\"target\" position=\"left\" />}\n      <div>\n        {data.label} - {data.component.timesUsed}\n      </div>\n      {data.outDegree > 0 && <Handle type=\"source\" position=\"right\" id=\"a\" />}\n    </StyledNode>\n  );\n};\n\nComponentNode.propTypes = {\n  data: PropTypes.any,\n};\n\nexport default ComponentNode;\n","export const baseUnit = 12;\nexport const navigationWidth = 250;\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { baseUnit, navigationWidth } from '../../tokens/units';\n\nconst Wrapper = styled.div`\n  padding-top: ${baseUnit * 2}px;\n  padding-bottom: ${baseUnit}px;\n  padding-left: ${baseUnit * 2}px;\n`;\n\nconst StyledTitle = styled.h2`\n  color: white;\n  font-weight: 400;\n  text-align: right;\n  margin-bottom: ${baseUnit}px;\n  padding-right: ${baseUnit}px;\n`;\nconst Line = styled.hr`\n  width: ${navigationWidth - 20}px;\n  color: blue;\n  margin: 0;\n  margin-left: auto;\n`;\n\nconst MenuTitle = ({ children }) => {\n  return (\n    <Wrapper>\n      <StyledTitle>{children}</StyledTitle>\n      <Line />\n    </Wrapper>\n  );\n};\n\nexport default MenuTitle;\n","import 'antd/dist/antd.css';\n\nimport { i18n } from '@lingui/core';\nimport { I18nProvider } from '@lingui/react';\nimport { Button, Layout, Menu } from 'antd';\nimport dagre from 'dagre';\nimport React, { useEffect, useState } from 'react';\nimport ReactFlow, { Controls, isNode, MiniMap } from 'react-flow-renderer';\nimport styled from 'styled-components';\n\nimport useLocale from './hooks/useLocale';\nimport I18nWatchLocaleProvider from './providers/I18nWatchLocaleProvider';\nimport ThemeProvider from './providers/ThemeProvider';\nimport ComponentNode from './styles/atoms/ComponentNode';\nimport MenuTitle from './styles/atoms/MenuTitle';\nimport { baseUnit, navigationWidth } from './styles/tokens/units';\nimport { activate } from './utils';\nconst StyledLayout = styled(Layout)`\n  margin-left: ${navigationWidth}px;\n  padding: 1rem;\n  height: 100vh;\n`;\n\nconst StyledMiniMap = styled(MiniMap)`\n  position: absolute;\n  left: ${baseUnit + 26}px;\n`;\n\nconst Actions = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n  flex-wrap: wrap;\n  padding: ${baseUnit}px;\n  margin-left: auto;\n  width: 100%;\n\n  > * {\n    &:not(:last-child) {\n      margin-left: ${baseUnit}px;\n      margin-bottom: ${baseUnit}px;\n    }\n  }\n`;\n\nconst App = () => {\n  const { locale } = useLocale();\n  const [elements, setElements] = useState(null);\n  const { Sider } = Layout;\n\n  const dagreGraph = new dagre.graphlib.Graph();\n  dagreGraph.setDefaultEdgeLabel(() => ({}));\n\n  // In order to keep this example simple the node width and height are hardcoded.\n  // In a real world app you would use the correct width and height values of\n  // const nodes = useStoreState(state => state.nodes) and then node.__rf.width, node.__rf.height\n\n  const nodeWidth = 172;\n  //const nodeHeight = 36;\n  const getLayoutedElements = (elements, direction = 'LR') => {\n    const isHorizontal = direction === 'LR';\n    dagreGraph.setGraph({ rankdir: direction });\n\n    elements.forEach((el) => {\n      if (isNode(el)) {\n        dagreGraph.setNode(el.id, {\n          width: nodeWidth + 20,\n          height: 36 + el.data.linesOfCode,\n        });\n      } else {\n        dagreGraph.setEdge(el.source, el.target);\n      }\n    });\n\n    dagre.layout(dagreGraph);\n\n    return elements.map((el) => {\n      if (isNode(el)) {\n        const nodeWithPosition = dagreGraph.node(el.id);\n        el.targetPosition = isHorizontal ? 'left' : 'top';\n        el.sourcePosition = isHorizontal ? 'right' : 'bottom';\n\n        // unfortunately we need this little hack to pass a slighltiy different position\n        // to notify react flow about the change. More over we are shifting the dagre node position\n        // (anchor=center center) to the top left so it matches the react flow node anchor point (top left).\n        el.position = {\n          x: nodeWithPosition.x - (nodeWidth + 20) / 2 + Math.random() / 1000,\n          y: nodeWithPosition.y - (36 + el.data.linesOfCode) / 2,\n        };\n      }\n\n      return el;\n    });\n  };\n\n  useEffect(() => {\n    activate(locale);\n    fetch('http://localhost:3000/data')\n      .then((res) => res.json())\n      .then((data) => {\n        setElements(\n          getLayoutedElements(\n            [].concat(\n              data.nodes,\n              data.edges.map((edge) => {\n                return {\n                  ...edge,\n                  labelBgPadding: [8, 4],\n                  labelBgBorderRadius: 4,\n                  labelBgStyle: {\n                    fill: '#001529',\n                    fillOpacity: 0.7,\n                  },\n                  labelStyle: { fill: '#fff' },\n                  style: { stroke: edge.label ? '#00D8FF' : '#000' },\n                };\n              })\n            )\n          )\n        );\n      })\n      .catch(console.log);\n  }, [locale]);\n\n  const recompile = () => {\n    fetch('http://localhost:3000/compile', { method: 'POST' });\n  };\n\n  return (\n    <I18nProvider i18n={i18n}>\n      <I18nWatchLocaleProvider>\n        <ThemeProvider>\n          <Layout>\n            <Sider\n              width={navigationWidth}\n              style={{\n                overflow: 'auto',\n                height: '100vh',\n                position: 'fixed',\n                left: 0,\n              }}\n            >\n              <Menu theme=\"dark\" mode=\"inline\">\n                <MenuTitle>Info</MenuTitle>\n                <MenuTitle>Filters</MenuTitle>\n                <MenuTitle>Actions</MenuTitle>\n                <Actions>\n                  <Button onClick={recompile} ghost>\n                    Recompile\n                  </Button>\n                  <Button ghost>Action</Button>\n                  <Button ghost>Action</Button>\n                  <Button ghost>Action</Button>\n                  <Button ghost>Action</Button>\n                  <Button ghost>Action</Button>\n                  <Button ghost>Action</Button>\n                </Actions>\n              </Menu>\n            </Sider>\n            <StyledLayout>\n              {elements && (\n                <ReactFlow\n                  elements={elements}\n                  connectionLineType=\"smoothstep\"\n                  nodeTypes={{ reactComponent: ComponentNode }}\n                >\n                  <StyledMiniMap />\n                  <Controls />\n                </ReactFlow>\n              )}\n            </StyledLayout>\n          </Layout>\n        </ThemeProvider>\n      </I18nWatchLocaleProvider>\n    </I18nProvider>\n  );\n};\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}